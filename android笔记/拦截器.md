# 基于OKHttp3的网络拦截器的由浅入深的学习 

## 在OKHttp中，拦截器是一种强大的机制，可以监视、重写和重试call请求

### 1.Okhttp的拦截器的作用：

* 拦截器可以一次性对所有请求的返回值进行修改
* 拦截器可以一次性对请求的参数和返回的结果进行编码，比如统一设置为UTF-8
* 拦截器可以对所有的请求做统一的日志记录，不需要在每个请求开始或结束的位置都添加一个日志操作
* 其他需要对请求和返回进行统一处理的需求

### 2.OKHttp拦截器的分类

* App层面的拦截器Application Interception
* 网络请求层面的拦截器Network Interception

### 3.两种的区别

Application：
  
* 不需要担心是否影响OKHttp的请求策略和请求速度
* 即使从缓存中取数据，也会执行Application拦截器
* 允许重试，即：Chain.proceed()可以执行多次
* 可以动态监听观察这个请求的最原始的未改变的意图（请求头、请求体等），只能操作客户端主动第一次请求及最终的响应结果

Network： 

* 可以修改OKHttp框架自动添加的一些属性，即允许操作中间响应，比如当请求操作发生重定向或者重试等
* 可以观察最终完整的请求参数 

#### 4.拦截器的实际作用

* 统一添加Header:  
	应用场景：后台要求请求API时，在每一个接口的请求头添加上对应的Token，这时候可以使用拦截器对他们进行统一配置

* 改变请求体：  
	应用场景：在login基础上，后天要求我们传过去的请求参数是要按照一定规则经过加密的
	
	规则：
	* 请求参数名统一为content
	* content值：JSON格式的字符串经过AES加密后的内容

